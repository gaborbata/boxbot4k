(function(){var k,l;function A(b){for(var a=1;a<arguments.length;a++)b=b.replace(/%s/,arguments[a]);return b}function w(b){var a=b.split("|"),c=a.shift();for(b=0;b<a.length;b++)c=c.replace(new RegExp(a[b].charAt(0),"g"),a[b].substring(1));return c}function x(b,a,c){for(var d=0;d<c.length;)c[d]=b.charCodeAt(a*c.length+d)-32,d++}function p(){0>f?f=49:49<f&&(f=0);u=m=0;g=!1;x(B,f,d);for(var b=0;14>b;b++)for(var a=0;12>a;a++)4==d[14*a+b]&&(d[14*a+b]=1,k=b,l=a)}function y(){for(var b=0;3>b;b++){for(var a=
0;14>a;a++)for(var c=0;12>c;c++)h?0==b&&2>=d[14*c+a]?e.drawImage(n[d[14*c+a]],32*a,32*c):1==b&&2<d[14*c+a]?e.drawImage(n[8],32*a+4,32*c+4):2==b&&2<d[14*c+a]&&e.drawImage(n[d[14*c+a]],32*a,32*c):e.drawImage(n[0],32*a,32*c);1==b&&h?e.drawImage(n[7],32*k+4,32*l+4):2==b&&h&&e.drawImage(n[4],32*k,32*l)}e.font="bold 14px sans-serif";e.fillStyle="rgba(255, 255, 255, 0.4)";e.textAlign="center";h?(g&&e.fillText("LEVEL COMPLETED! PRESS ENTER TO CONTINUE.",224,19),b=A("LEVEL: %s     MOVES: %s     PUSHES: %s",
f+1,m,u),e.fillText(b,224,376)):(e.fillText("BOXBOT",224,125.5),e.fillText("GAME CONTROLS:",224,163.5),e.fillText("ARROW KEYS - MOVE",224,182.5),e.fillText("BACKSPACE - RESTART LEVEL",224,201.5),e.fillText("PGUP/PGDN - NEXT/PREVIOUS LEVEL",224,220.5),e.fillText("PRESS ANY KEY TO START.",224,258.5),e.fillText("(C) 2014 GABOR BATA",224,376))}function C(b){z(b.target.id)}function D(){q=!1}function E(b){if(!q){q=!0;var a="";switch(b.keyCode){case 38:a="up";break;case 40:a="down";break;case 37:a="left";
break;case 39:a="right";break;case 33:a="next";break;case 34:a="prev";break;case 8:a="reset";break;case 13:a="continue";break;default:if(h)return}b.preventDefault();""==a&&h||z(a)}}function z(b){if(h){var a=0,c=0;switch(b){case "up":c=-1;break;case "down":c=1;break;case "left":a=-1;break;case "right":a=1;break;case "next":f++;p();break;case "prev":f--;p();break;case "reset":p();break;case "continue":g&&(f++,p())}if((0!=a||0!=c)&&!g){b=14*(l+c)+k+a;var e=14*(l+2*c)+k+2*a;1==d[b]||2==d[b]?(k+=a,l+=
c,m++):5!=d[b]&&6!=d[b]||1!=d[e]&&2!=d[e]||(d[b]=5==d[b]?1:2,d[e]=1==d[e]?5:6,k+=a,l+=c,m++,u++);a=!0;for(c=0;c<d.length;c++)5==d[c]&&(a=!1);g=a}}else h=!0;y()}var B=w('uu~vpY,j-#WWPF!"=R`wN%$:&hb;mv`jwNkV&JNT8NwsSpjjYt$wEkbZ"Vdfg"#9NTbhkDYR oGCP"&&%$nC=xYd pDb"I":x:FDY0pD8sl"Bt#2EkNkbhws0wpai7w!HCn6"2a%twy;0pgxGCPU#kLxkspTY0fcottwOxeq!/lWt/1hl/pT-xYSfprp$%Z4&lcl%hAoxYMpjpX3X$%kaxwbhjYSobx"EJ8#Q!xbkTsl5S fnplnJ&q!HexaTx>dpYJ$jwEqEhNwsdvoQlXktHtxhPZtL%JkaFwa0ow@"Xp"L!lnxtknxT%Hxx>mOpDori#2ciI"4w!%"co;Mos tTwXlL%"&tne"&qPx_iVz~ `Y#%$YJ%wQ"WH1lAC!co;z~pjw:Fbh#9Q"W7"tXl@#QxYz~K_6xpOtkeq/x"$3/wkeprthh>R`-x"&hPkk$nlG#d owahh"yltaxkE9N$gd`5l#X$%kXtta"3>d pY1D#7W@!Q%t5"2gSf>%tHx%$kPin#UhBMwp8N"%wpOw&"Wqc#2%lc6-ROoB!3ne&%tP#F!nxhBRKBUU$Axk#k4Wk4#lcwpRvpyo!$<%kXhkQ"h5doG1$ZPkWL&#&_i!@!<pySowX3<%U>%&_eF!nC=dpD8#XtU7I$Qtts x"gd oQl7I$aUh#@VdKbl:FQ!k#7&!:,N"5S`spk#<Wa$#&hHx&ZLiVz~vo>Fahk"<kHwtB!W@!aZwaS`#g$hgU9Ek8Vd`BtZn#$IWnl,npZ5dpjjpXU&!L!ITnlG;mOfw<"kprw!"tkP"e$LZk<pymv`-iTA1&"%&!c6#Wn#lwadvGoxnlU%Ae$tkcw%"3nx6=Mfs t#9QUTX&"kXe#@VmvwY JoaUZXttprl%k$cwx%kQ;mKGxw!"c#lW49k"cl#TA,6=dfbl_eIkPU"hL!TwaMoGJh$UnxIk=!orC!ci!k4oAouu|,#h|-w_|/#O|0mr|1t"|2$"|3Z!|4cx|5#b|6#x|7ye|8si|9%#|:st|;lg|<yx|=no|>yp|@yi|Awr|B_w|Ciq|DVx|Ese|F$q|Go~|Hw~|I%%|J#"|K  o|Lnw|MS~r|Nsx|Ov |Pnt|Qyw|Rd~~|Sm~|T$!|U""|Vsw|W%q|Xyt|Yyv|Z"q|_p~|` pj|ay#|bs#|c#r|dmu|et%|fos l|gs #|h"!|ixq|jyvx|k%!|lx!|mzu|n#~|oww|pw#|q!!|rv  |sy |t#!|u~~~|v   |w##|x#!!|y#~ |z####~~~~~~~|~      '),
F=w('~jynttnyynhnyynivtumtumthomthomouhliol~trntrtv ytjtlz"rz"lllwouoywrujpggggssssp"ll~wouoywrujp"v uy ffxiel!v uuyyvelkffxi uyl~uy!jky!vdkdvoyr"!vzq ize~w!jy qykd!r"qyrd~"qqq"!roq!rzkzq z"rze~wukqy!v"!royvokz!vz zriz |d"y|e !|fxx|g"~|h!z|izz|jry|k! |l~~|mtt~ |nt~v|o""|pzzzzz"|q!~"|r  |swwwwww|t!"|uyyy|v~~ |w" y|xzz !~~! |y!!|z"""|~   '),v=[["rgba(33, 40, 92, 1)","rgba(25, 32, 76, 1)","rgba(48, 51, 120, 1)",2],["rgba(92, 60, 32, 1)","rgba(76, 48, 24, 1)","rgba(120, 88, 48, 1)",2],["rgba(116, 6, 12, 1)",
"rgba(100, 3, 5, 1)","rgba(142, 22, 24, 1)",2],["rgba(162, 155, 121, 1)","rgba(206, 196, 145, 1)","rgba(127, 117, 67, 1)",3],["rgba(0 ,0 ,0 ,0)","rgba(192, 192, 192, 1)","rgba(128, 128, 128, 1)",0],["rgba(196 ,168 ,100 ,1)","rgba(168, 132, 72, 1)","rgba(111, 78, 42, 1)",1],["rgba(196, 120, 101, 1)","rgba(168, 84, 73, 1)","rgba(111, 44, 43, 1)",1],["rgba(0, 0, 0, 0)","rgba(0, 0, 0, 0.3)","rgba(0, 0, 0, 0.3)",0],["rgba(0, 0, 0, 0.3)","rgba(0, 0, 0, 0.3)","rgba(0, 0, 0, 0.3)",1]],n,d,e,m,u,g,f,h,q;(function(){var b=
document.getElementById("boxbot4k");if(null!=b&&b.getContext){e=b.getContext("2d");for(var b=Array(v.length),a=Array(256),c=0;c<b.length;c++){x(F,v[c][3],a);var g=document.createElement("canvas");g.width=32;g.height=32;var m=g.getContext("2d");m.clearRect(0,0,32,32);for(var r=0;16>r;r++)for(var t=0;16>t;t++)m.fillStyle=v[c][a[16*t+r]],m.fillRect(2*r,2*t,2,2);b[c]=g}n=b;d=Array(168);l=k=f=0;q=h=!1;p();y();window.addEventListener("keydown",E,!1);window.addEventListener("keyup",D,!1);b=document.getElementsByTagName("button");
for(a=0;a<b.length;a++)b[a].id&&b[a].addEventListener("touchstart",C,!1)}else document.body.appendChild(document.createTextNode("Could not initialize game."))})()})();
